const { response } = require("express");

var express=require("express"); // Cargamos el modulo

var app=express(); // Generamos una aplicación que hace uso de express

var port= (process.env.PORT || 10000); // Obtiene el puerto que se le indique o el 10000 en caso de no existir  (Heroku no trabaja con puerto 10000)

var BASE_API_PATH = "/api/v1";

app.listen(port, () =>{ // Cuando el servidor está listo, ejecuta el código interior.
    console.log("Server ready listening on port "+port); 
});

var path=require("path");
 
// Dirname obtiene la carpeta donde se ejecuto npm start (C:\\....).
// Use hace que cuando se llame a lo que sea que esté dentro de /, lo busque en la carpeta public...
app.use("/",express.static(path.join(__dirname + "/public")));  

var activities=[];

app.get(BASE_API_PATH+"/info/azar-games-and-bet-activities", (request,response)=>{ 
    response.send(JSON.stringify(activities,null,2));
 
});

app.get(BASE_API_PATH+"/province-budget-and-investment-in-social-promotion", (request,response)=>{ 
    response.send(`<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="resources/sheet.css" >
    <style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .s0{background-color:#f3f3f3;text-align:center;font-weight:bold;font-style:italic;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s1{background-color:#f3f3f3;text-align:center;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}</style><div class="ritz grid-container" dir="ltr"><table class="waffle" cellspacing="0" cellpadding="0"><thead><tr><th class="row-header freezebar-origin-ltr"></th><th id="1843227758C0" style="width:100px;" class="column-headers-background">A</th><th id="1843227758C1" style="width:100px;" class="column-headers-background">B</th><th id="1843227758C2" style="width:118px;" class="column-headers-background">C</th><th id="1843227758C3" style="width:160px;" class="column-headers-background">D</th><th id="1843227758C4" style="width:109px;" class="column-headers-background">E</th><th id="1843227758C5" style="width:100px;" class="column-headers-background">F</th></tr></thead><tbody><tr style="height: 20px"><th id="1843227758R0" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">1</div></th><td class="s0" dir="ltr">province</td><td class="s0" dir="ltr">year</td><td class="s0" dir="ltr">budget</td><td class="s0" dir="ltr">invest-promotion</td><td class="s0" dir="ltr">liquid</td><td class="s0" dir="ltr">percentage</td></tr><tr style="height: 20px"><th id="1843227758R1" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">2</div></th><td class="s1" dir="ltr">SEVILLE</td><td class="s1" dir="ltr">2018</td><td class="s1" dir="ltr">30,714,715</td><td class="s1" dir="ltr">2,322,823</td><td class="s1" dir="ltr">28,391,892</td><td class="s1" dir="ltr">7.56%</td></tr><tr style="height: 20px"><th id="1843227758R2" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">3</div></th><td class="s1" dir="ltr">SEVILLE</td><td class="s1" dir="ltr">2017</td><td class="s1" dir="ltr">29,194,210</td><td class="s1" dir="ltr">2,201,782</td><td class="s1" dir="ltr">26,992,428</td><td class="s1" dir="ltr">7.54%</td></tr><tr style="height: 20px"><th id="1843227758R3" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">4</div></th><td class="s1" dir="ltr">SEVILLE</td><td class="s1" dir="ltr">2016</td><td class="s1" dir="ltr">27,037,781</td><td class="s1" dir="ltr">2,145,096</td><td class="s1" dir="ltr">24,892,685</td><td class="s1" dir="ltr">7.93%</td></tr><tr style="height: 20px"><th id="1843227758R4" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">5</div></th><td class="s1" dir="ltr">BARCELONA</td><td class="s1" dir="ltr">2018</td><td class="s1" dir="ltr">29,178,828</td><td class="s1" dir="ltr">2,089,505</td><td class="s1" dir="ltr">27,089,323</td><td class="s1" dir="ltr">7.16%</td></tr><tr style="height: 20px"><th id="1843227758R5" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">6</div></th><td class="s1" dir="ltr">BARCELONA</td><td class="s1" dir="ltr">2017</td><td class="s1" dir="ltr">30,620,317</td><td class="s1" dir="ltr">2,079,758</td><td class="s1" dir="ltr">28,540,559</td><td class="s1" dir="ltr">6.79%</td></tr><tr style="height: 20px"><th id="1843227758R6" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">7</div></th><td class="s1" dir="ltr">BARCELONA</td><td class="s1" dir="ltr">2016</td><td class="s1" dir="ltr">29,449,783</td><td class="s1" dir="ltr">1,937,622</td><td class="s1" dir="ltr">27,512,161</td><td class="s1" dir="ltr">6.58%</td></tr><tr style="height: 20px"><th id="1843227758R7" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">8</div></th><td class="s1" dir="ltr">MADRID</td><td class="s1" dir="ltr">2018</td><td class="s1" dir="ltr">21,633,751</td><td class="s1" dir="ltr">1,742,793</td><td class="s1" dir="ltr">19,890,958</td><td class="s1" dir="ltr">8.06%</td></tr><tr style="height: 20px"><th id="1843227758R8" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">9</div></th><td class="s1" dir="ltr">MADRID</td><td class="s1" dir="ltr">2017</td><td class="s1" dir="ltr">20,504,094</td><td class="s1" dir="ltr">1,628,027</td><td class="s1" dir="ltr">18,876,067</td><td class="s1" dir="ltr">7.94%</td></tr><tr style="height: 20px"><th id="1843227758R9" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">10</div></th><td class="s1" dir="ltr">MADRID</td><td class="s1" dir="ltr">2016</td><td class="s1" dir="ltr">20,139,609</td><td class="s1" dir="ltr">1,520,787</td><td class="s1" dir="ltr">18,618,822</td><td class="s1" dir="ltr">7.55%</td></tr><tr style="height: 20px"><th id="1843227758R10" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">11</div></th><td class="s1" dir="ltr">VALENCIA</td><td class="s1" dir="ltr">2018</td><td class="s1" dir="ltr">20,246,195</td><td class="s1" dir="ltr">1,208,254</td><td class="s1" dir="ltr">19,037,941</td><td class="s1" dir="ltr">5.97%</td></tr><tr style="height: 20px"><th id="1843227758R11" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">12</div></th><td class="s1" dir="ltr">VALENCIA</td><td class="s1" dir="ltr">2017</td><td class="s1" dir="ltr">17,958,855</td><td class="s1" dir="ltr">1,008,985</td><td class="s1" dir="ltr">16,949,870</td><td class="s1" dir="ltr">5.62%</td></tr><tr style="height: 20px"><th id="1843227758R12" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">13</div></th><td class="s1" dir="ltr">VALENCIA</td><td class="s1" dir="ltr">2016</td><td class="s1" dir="ltr">17,354,885</td><td class="s1" dir="ltr">965,736</td><td class="s1" dir="ltr">16,389,149</td><td class="s1" dir="ltr">5.56%</td></tr></tbody></table></div>`);
 
});



var suicide=[];

app.get(BASE_API_PATH+"/suicide-records", (request,response)=>{ 

    response.send(JSON.stringify(suicide,null,2));
});

app.get(BASE_API_PATH+"/precariousness",(request,response)=>{
    response.send(`<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="resources/sheet.css" >
    <style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .s1{border-right: none;background-color:#f3f3f3;text-align:center;font-weight:bold;font-style:italic;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s3{border-left: none;border-right: none;background-color:#efefef;text-align:center;font-weight:bold;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s5{background-color:#efefef;text-align:center;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s0{background-color:#f3f3f3;text-align:center;font-weight:bold;font-style:italic;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s4{background-color:#f3f3f3;text-align:center;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s2{border-left: none;border-right: none;background-color:#f3f3f3;text-align:center;font-weight:bold;font-style:italic;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}</style><div class="ritz grid-container" dir="ltr"><table class="waffle" cellspacing="0" cellpadding="0"><thead><tr><th class="row-header freezebar-origin-ltr"></th><th id="2103245264C0" style="width:100px;" class="column-headers-background">A</th><th id="2103245264C1" style="width:100px;" class="column-headers-background">B</th><th id="2103245264C2" style="width:100px;" class="column-headers-background">C</th><th id="2103245264C3" style="width:100px;" class="column-headers-background">D</th><th id="2103245264C4" style="width:100px;" class="column-headers-background">E</th><th id="2103245264C5" style="width:100px;" class="column-headers-background">F</th></tr></thead><tbody><tr style="height: 20px"><th id="2103245264R0" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">1</div></th><td class="s0" dir="ltr">province</td><td class="s1" dir="ltr">year</td><td class="s2 softmerge" dir="ltr"><div class="softmerge-inner" style="width:99px;left:-3px">percentage-unemploy-mens</div></td><td class="s2 softmerge" dir="ltr"><div class="softmerge-inner" style="width:99px;left:-3px">percentage-unemploy-women</div></td><td class="s2 softmerge" dir="ltr"><div class="softmerge-inner" style="width:99px;left:-3px">percentage-unemploy-total</div></td><td class="s3 softmerge" dir="ltr"><div class="softmerge-inner" style="width:200px;left:-3px">number-unemployed</div></td></tr><tr style="height: 20px"><th id="2103245264R1" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">2</div></th><td class="s4" dir="ltr">SEVILLE</td><td class="s4" dir="ltr">2018</td><td class="s4" dir="ltr">18</td><td class="s4" dir="ltr">25</td><td class="s4" dir="ltr">21</td><td class="s5" dir="ltr">68 434</td></tr><tr style="height: 20px"><th id="2103245264R2" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">3</div></th><td class="s4" dir="ltr">SEVILLE</td><td class="s4" dir="ltr">2017</td><td class="s4" dir="ltr">20</td><td class="s4" dir="ltr">25</td><td class="s4" dir="ltr">22</td><td class="s5" dir="ltr">72 679</td></tr><tr style="height: 20px"><th id="2103245264R3" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">4</div></th><td class="s4" dir="ltr">SEVILLE</td><td class="s4" dir="ltr">2016</td><td class="s4" dir="ltr">25</td><td class="s4" dir="ltr">30</td><td class="s4" dir="ltr">24</td><td class="s5" dir="ltr">77 627</td></tr><tr style="height: 20px"><th id="2103245264R4" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">5</div></th><td class="s4" dir="ltr">BARCELONA</td><td class="s4" dir="ltr">2018</td><td class="s4" dir="ltr">10</td><td class="s4" dir="ltr">12</td><td class="s4" dir="ltr">11</td><td class="s5" dir="ltr">392 907</td></tr><tr style="height: 20px"><th id="2103245264R5" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">6</div></th><td class="s4" dir="ltr">BARCELONA</td><td class="s4" dir="ltr">2017</td><td class="s4" dir="ltr">11</td><td class="s4" dir="ltr">13</td><td class="s4" dir="ltr">12</td><td class="s5" dir="ltr">418 018</td></tr><tr style="height: 20px"><th id="2103245264R6" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">7</div></th><td class="s4" dir="ltr">BARCELONA</td><td class="s4" dir="ltr">2016</td><td class="s4" dir="ltr">14</td><td class="s4" dir="ltr">16</td><td class="s4" dir="ltr">15</td><td class="s5" dir="ltr">558 500</td></tr><tr style="height: 20px"><th id="2103245264R7" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">8</div></th><td class="s4" dir="ltr">MADRID</td><td class="s4" dir="ltr">2018</td><td class="s4" dir="ltr">11</td><td class="s4" dir="ltr">12</td><td class="s4" dir="ltr">12</td><td class="s5" dir="ltr">396 200</td></tr><tr style="height: 20px"><th id="2103245264R8" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">9</div></th><td class="s4" dir="ltr">MADRID</td><td class="s4" dir="ltr">2017</td><td class="s4" dir="ltr">13</td><td class="s4" dir="ltr">15</td><td class="s4" dir="ltr">14</td><td class="s5" dir="ltr">471 100</td></tr><tr style="height: 20px"><th id="2103245264R9" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">10</div></th><td class="s4" dir="ltr">MADRID</td><td class="s4" dir="ltr">2016</td><td class="s4" dir="ltr">14</td><td class="s4" dir="ltr">15</td><td class="s4" dir="ltr">15</td><td class="s5" dir="ltr">489 100</td></tr><tr style="height: 20px"><th id="2103245264R10" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">11</div></th><td class="s4" dir="ltr">VALENCIA</td><td class="s4" dir="ltr">2018</td><td class="s4" dir="ltr">11</td><td class="s4" dir="ltr">16</td><td class="s4" dir="ltr">13</td><td class="s5" dir="ltr">344 100</td></tr><tr style="height: 20px"><th id="2103245264R11" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">12</div></th><td class="s4" dir="ltr">VALENCIA</td><td class="s4" dir="ltr">2017</td><td class="s4" dir="ltr">14</td><td class="s4" dir="ltr">19</td><td class="s4" dir="ltr">16</td><td class="s5" dir="ltr">410 000</td></tr><tr style="height: 20px"><th id="2103245264R12" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">13</div></th><td class="s4" dir="ltr">VALENCIA</td><td class="s4" dir="ltr">2016</td><td class="s4" dir="ltr">18</td><td class="s4" dir="ltr">23</td><td class="s4" dir="ltr">20</td><td class="s5" dir="ltr">467 400</td></tr></tbody></table></div>`)
});

